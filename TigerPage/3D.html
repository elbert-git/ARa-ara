<html>
  <head>
    <!-- aframe -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script type="text/javascript"></script>
    <!-- a-frame extras -->
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <!-- a-frame look controls -->
    <script src="https://unpkg.com/aframe-orbit-controls@1.3.0/dist/aframe-orbit-controls.min.js"></script>
    <script src="https://unpkg.com/aframe-supercraft-loader@1.1.3/dist/aframe-supercraft-loader.js"></script>

    <link rel="stylesheet" href="../stylesheet.css">
    <link rel="stylesheet" href="./Android3Dstylesheet.css">

    <!-- ar component -->
    <script src="https://ada.is/basketball-demo/ar-components.js"></script>
  </head>
  <body>
    <!-- top share banner   -->
    <div class="top-share-parent">
      <button class="top-share-button share-buttons" onclick="shareButtonClicked()">Share</button>
      <button class="top-share-button" onclick="location.href='https://elbert-git.github.io/ARa-ara/'">Customise Tiger</button>
    </div>

    <!-- scene -->
    <a-scene 
      embedded
      webxr="optionalFeatures: hit-test, dom-overlay; overlayElement:#overlay;"
      vr-mode-ui="vrEnabled:false; arEnabled: true"
      background="transparent:true"
      >

      <!-- asset list -->
      <a-assets>
        <!-- main tiger model -->
        <a-asset-item id="tigerA" src="./Assets/TigerInParts/TigerA/TigerA.gltf"></a-asset-item>
        <a-asset-item id="tigerB" src="./Assets/TigerInParts/TigerB/TigerB.gltf"></a-asset-item>

        <!-- constant props -->
        <a-asset-item id="const-props" src="./Assets/TigerInParts/Constants/Constants.gltf"></a-asset-item>

        <!-- scroll -->
        <a-asset-item id="scroll-0" src="./Assets/TigerInParts/Scroll0/scroll0.gltf" alt=""></a-asset-item>
        <a-asset-item id="scroll-1" src="./Assets/TigerInParts/Scroll1/scroll1.gltf" alt=""></a-asset-item>
        <a-asset-item id="scroll-2" src="./Assets/TigerInParts/Scroll2/scroll2.gltf" alt=""></a-asset-item>


        <!-- audio -->
        <audio id="music" src="./chinese-loop.mp3"></audio>


      </a-assets>

      <!-- main ar scene -->
      <a-entity scale="0.05 0.05 0.05"  id="world">
        <!-- models -->
        <a-entity 
        id="tigerAEntity"
        gltf-model="#tigerA"
        rotation="0 0 0"
        scale="1 1 1"
        animation-mixer="clip: Action.001; loop:true;"
        ></a-entity>
        <a-entity 
        id="tigerBEntity"
        gltf-model="#tigerB"
        rotation="0 0 0"
        scale="1 1 1"
        animation-mixer="clip: Action.001; loop:true;"
        ></a-entity>

        <!-- props -->
        <a-entity 
        id="propsEntity"
        gltf-model="#const-props"
        rotation="0 0 0"
        scale="1 1 1"
        animation-mixer="clip: Action.001; true;"
        ></a-entity>

        <!-- scroll -->
        <a-entity 
        id="scroll0Entity"
        gltf-model="#scroll-0"
        ></a-entity>
        <a-entity 
        id="scroll1Entity"
        gltf-model="#scroll-1"
        ></a-entity>
        <a-entity 
        id="scroll2Entity"
        gltf-model="#scroll-2"
        ></a-entity>
        <!-- sound -->
        <a-entity sound="src: #music; autoplay: true; loop: true"></a-entity>      
      </a-entity>

      <!-- reticle -->
      <a-entity ar-hit-test="target:#world">
        <a-plane 
        rotation="-90 0 0"
        scale="0.1 0.1 0.1"
        material="src:./Assets/reticle.png"
        ></a-plane>
      </a-entity>


      <!-- camera -->
      <a-entity
      camera
      orbit-controls="target: 0 0.2 0; minDistance: 0.4; maxDistance: 0.4; initialPosition: 0 0.2 0.4"
      ></a-entity>
    </a-scene>

    <!-- bottom ar prompt -->
    <div id="test"class="bottom-ar-prompt">
      tap here to display in AR
    </div>
    

    <div id="overlay" class="hide">
      <header>
        <div style="margin-top:1em;">hover over a surface and tap to spawn the tiger</div>
        <button class="top-share-button share-buttons" onclick="shareButtonClicked()">
          Share
        </button>
      </header>

      <div class="rotate-prompt-parent" id="dismiss-on-tap">
        <div class="rotate-prompt">
          <img style="" src="./Assets/rotatePhone.gif" alt="">
          <div> <b>Rotate</b> your phone around <b>Slowly</b> to scan a surface</div>
          <button id="dismiss-button" onclick="dismissPrompt()">dismiss</button>
        </div>
      </div>
    </div>

    <!-- apple ar button -->
    <div id="apple-ar-button-parent" class="hide">
      <button style="" id="apple-ar-button-start">
        <a rel="ar" id="ar-link" href="
        ./Assets/Tigers_Animation_5_Exporting_In.usdz#
        custom=https://elbert-git.github.io/ARa-ara/AppleButton.html&
        customHeight=small
        ">
          AR
        </a>
      </button>
    </div>


    <!-- script -->
    <script src="./3D.js"></script>
  </body>
</html>
